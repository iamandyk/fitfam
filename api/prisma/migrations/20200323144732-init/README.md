# Migration `20200323144732-init`

This migration has been generated by Andy Kay at 3/23/2020, 2:47:32 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE `fitfam`.`User` (
    `bio` varchar(191)   ,
    `createdAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    `dateOfBirth` datetime(3)   ,
    `email` varchar(191) NOT NULL DEFAULT '' ,
    `height` varchar(191)   ,
    `id` varchar(191) NOT NULL  ,
    `instagram` varchar(191)   ,
    `name` varchar(191) NOT NULL DEFAULT '' ,
    `picture` varchar(191) NOT NULL DEFAULT '' ,
    `updatedAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    `username` varchar(191) NOT NULL DEFAULT '' ,
    PRIMARY KEY (`id`)
) 
DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `fitfam`.`Workout` (
    `createdAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    `id` varchar(191) NOT NULL  ,
    `slug` varchar(191) NOT NULL DEFAULT '' ,
    `title` varchar(191) NOT NULL DEFAULT '' ,
    `updatedAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    `user` varchar(191) NOT NULL ,
    PRIMARY KEY (`id`)
) 
DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `fitfam`.`WorkoutLog` (
    `createdAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    `exercise` varchar(191) NOT NULL ,
    `id` varchar(191) NOT NULL  ,
    `reps` int NOT NULL DEFAULT 0 ,
    `updatedAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    `user` varchar(191) NOT NULL ,
    `weight` Decimal(65,30) NOT NULL DEFAULT 0 ,
    `workout` varchar(191) NOT NULL ,
    PRIMARY KEY (`id`)
) 
DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `fitfam`.`Exercise` (
    `createdAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    `id` varchar(191) NOT NULL  ,
    `name` varchar(191) NOT NULL DEFAULT '' ,
    `slug` varchar(191) NOT NULL DEFAULT '' ,
    `updatedAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    PRIMARY KEY (`id`)
) 
DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `fitfam`.`Bodyweight` (
    `createdAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    `id` varchar(191) NOT NULL  ,
    `updatedAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    `user` varchar(191) NOT NULL ,
    `weight` Decimal(65,30) NOT NULL DEFAULT 0 ,
    PRIMARY KEY (`id`)
) 
DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `fitfam`.`ProfileSong` (
    `artist` varchar(191) NOT NULL DEFAULT '' ,
    `createdAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    `id` varchar(191) NOT NULL  ,
    `provider` varchar(191) NOT NULL DEFAULT '' ,
    `thumbnail` varchar(191) NOT NULL DEFAULT '' ,
    `title` varchar(191) NOT NULL DEFAULT '' ,
    `updatedAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    `url` varchar(191) NOT NULL DEFAULT '' ,
    `user` varchar(191) NOT NULL ,
    PRIMARY KEY (`id`)
) 
DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `fitfam`.`Supplement` (
    `added_by` varchar(191) NOT NULL ,
    `brand` varchar(191) NOT NULL DEFAULT '' ,
    `createdAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    `id` varchar(191) NOT NULL  ,
    `image_url` varchar(191) NOT NULL DEFAULT '' ,
    `name` varchar(191) NOT NULL DEFAULT '' ,
    `supplementStack` varchar(191)  ,
    `updatedAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    `url` varchar(191) NOT NULL DEFAULT '' ,
    PRIMARY KEY (`id`)
) 
DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `fitfam`.`SupplementStack` (
    `createdAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    `id` varchar(191) NOT NULL  ,
    `updatedAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    `user` varchar(191) NOT NULL ,
    PRIMARY KEY (`id`)
) 
DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE UNIQUE INDEX `User.email` ON `fitfam`.`User`(`email`)

CREATE UNIQUE INDEX `User.username` ON `fitfam`.`User`(`username`)

CREATE UNIQUE INDEX `Exercise.name` ON `fitfam`.`Exercise`(`name`)

CREATE UNIQUE INDEX `Exercise.slug` ON `fitfam`.`Exercise`(`slug`)

ALTER TABLE `fitfam`.`Workout` ADD FOREIGN KEY (`user`) REFERENCES `fitfam`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `fitfam`.`WorkoutLog` ADD FOREIGN KEY (`user`) REFERENCES `fitfam`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `fitfam`.`WorkoutLog` ADD FOREIGN KEY (`workout`) REFERENCES `fitfam`.`Workout`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `fitfam`.`WorkoutLog` ADD FOREIGN KEY (`exercise`) REFERENCES `fitfam`.`Exercise`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `fitfam`.`Bodyweight` ADD FOREIGN KEY (`user`) REFERENCES `fitfam`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `fitfam`.`ProfileSong` ADD FOREIGN KEY (`user`) REFERENCES `fitfam`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `fitfam`.`Supplement` ADD FOREIGN KEY (`added_by`) REFERENCES `fitfam`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `fitfam`.`Supplement` ADD FOREIGN KEY (`supplementStack`) REFERENCES `fitfam`.`SupplementStack`(`id`) ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE `fitfam`.`SupplementStack` ADD FOREIGN KEY (`user`) REFERENCES `fitfam`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200323144732-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,95 @@
+datasource db {
+  provider = "mysql"
+  url      = env("MYSQL_URL")
+}
+
+generator client {
+  provider      = "prisma-client-js"
+  binaryTargets = ["rhel-openssl-1.0.x", "native"]
+}
+
+model User {
+  id               String            @default(cuid()) @id
+  email            String            @unique
+  name             String
+  username         String            @unique
+  picture          String
+  bio              String?
+  workouts         Workout[]
+  bodyweights      Bodyweight[]
+  profile_songs    ProfileSong[]
+  supplement_stack SupplementStack[]
+  instagram        String?
+  dateOfBirth      DateTime?
+  height           String?
+  createdAt        DateTime          @default(now())
+  updatedAt        DateTime          @updatedAt
+}
+
+model Workout {
+  id        String       @default(cuid()) @id
+  title     String
+  slug      String
+  user      User
+  logs      WorkoutLog[]
+  createdAt DateTime     @default(now())
+  updatedAt DateTime     @updatedAt
+}
+
+model WorkoutLog {
+  id        String   @default(cuid()) @id
+  user      User
+  exercise  Exercise
+  workout   Workout
+  reps      Int
+  weight    Float
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+}
+
+model Exercise {
+  id        String   @default(cuid()) @id
+  name      String   @unique
+  slug      String   @unique
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+}
+
+model Bodyweight {
+  id        String   @default(cuid()) @id
+  weight    Float
+  user      User
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+}
+
+model ProfileSong {
+  id        String   @default(cuid()) @id
+  user      User
+  thumbnail String
+  url       String
+  title     String
+  artist    String
+  provider  String
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+}
+
+model Supplement {
+  id        String   @default(cuid()) @id
+  name      String
+  url       String
+  image_url String
+  brand     String
+  added_by  User
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+}
+
+model SupplementStack {
+  id          String       @default(cuid()) @id
+  user        User
+  supplements Supplement[]
+  createdAt   DateTime     @default(now())
+  updatedAt   DateTime     @updatedAt
+}
```


