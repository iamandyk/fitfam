# Migration `20200511114351-init`

This migration has been generated by Andy Kay at 5/11/2020, 11:43:51 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE `fitfam`.`User` (
`bio` varchar(191)   ,`createdAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ,`dateOfBirth` datetime(3)   ,`email` varchar(191) NOT NULL  ,`height` varchar(191)   ,`id` varchar(191) NOT NULL  ,`instagram` varchar(191)   ,`name` varchar(191) NOT NULL  ,`picture` varchar(191) NOT NULL  ,`updatedAt` datetime(3) NOT NULL  ,`username` varchar(191) NOT NULL  ,
    PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `fitfam`.`Workout` (
`createdAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ,`id` varchar(191) NOT NULL  ,`slug` varchar(191) NOT NULL  ,`title` varchar(191) NOT NULL  ,`updatedAt` datetime(3) NOT NULL  ,`user` varchar(191) NOT NULL ,
    PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `fitfam`.`WorkoutLog` (
`createdAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ,`exercise` varchar(191) NOT NULL ,`id` varchar(191) NOT NULL  ,`reps` int NOT NULL  ,`updatedAt` datetime(3) NOT NULL  ,`user` varchar(191) NOT NULL ,`weight` Decimal(65,30) NOT NULL  ,`workout` varchar(191) NOT NULL ,
    PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `fitfam`.`Exercise` (
`createdAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ,`id` varchar(191) NOT NULL  ,`name` varchar(191) NOT NULL  ,`slug` varchar(191) NOT NULL  ,`updatedAt` datetime(3) NOT NULL  ,
    PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `fitfam`.`Bodyweight` (
`createdAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ,`id` varchar(191) NOT NULL  ,`updatedAt` datetime(3) NOT NULL  ,`user` varchar(191) NOT NULL ,`weight` Decimal(65,30) NOT NULL  ,
    PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `fitfam`.`ProfileSong` (
`artist` varchar(191) NOT NULL  ,`createdAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ,`id` varchar(191) NOT NULL  ,`provider` varchar(191) NOT NULL  ,`thumbnail` varchar(191) NOT NULL  ,`title` varchar(191) NOT NULL  ,`updatedAt` datetime(3) NOT NULL  ,`url` varchar(191) NOT NULL  ,`user` varchar(191) NOT NULL ,
    PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `fitfam`.`Supplement` (
`added_by` varchar(191) NOT NULL ,`brand` varchar(191) NOT NULL  ,`createdAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ,`id` varchar(191) NOT NULL  ,`image_url` varchar(191) NOT NULL  ,`name` varchar(191) NOT NULL  ,`supplementStackId` varchar(191)  ,`updatedAt` datetime(3) NOT NULL  ,`url` varchar(191) NOT NULL  ,
    PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE TABLE `fitfam`.`SupplementStack` (
`createdAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ,`id` varchar(191) NOT NULL  ,`updatedAt` datetime(3) NOT NULL  ,`user` varchar(191) NOT NULL ,
    PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

CREATE UNIQUE INDEX `User.email` ON `fitfam`.`User`(`email`)

CREATE UNIQUE INDEX `User.username` ON `fitfam`.`User`(`username`)

CREATE UNIQUE INDEX `Exercise.name` ON `fitfam`.`Exercise`(`name`)

CREATE UNIQUE INDEX `Exercise.slug` ON `fitfam`.`Exercise`(`slug`)

ALTER TABLE `fitfam`.`Workout` ADD FOREIGN KEY (`user`) REFERENCES `fitfam`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `fitfam`.`WorkoutLog` ADD FOREIGN KEY (`user`) REFERENCES `fitfam`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `fitfam`.`WorkoutLog` ADD FOREIGN KEY (`exercise`) REFERENCES `fitfam`.`Exercise`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `fitfam`.`WorkoutLog` ADD FOREIGN KEY (`workout`) REFERENCES `fitfam`.`Workout`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `fitfam`.`Bodyweight` ADD FOREIGN KEY (`user`) REFERENCES `fitfam`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `fitfam`.`ProfileSong` ADD FOREIGN KEY (`user`) REFERENCES `fitfam`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `fitfam`.`Supplement` ADD FOREIGN KEY (`added_by`) REFERENCES `fitfam`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `fitfam`.`Supplement` ADD FOREIGN KEY (`supplementStackId`) REFERENCES `fitfam`.`SupplementStack`(`id`) ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE `fitfam`.`SupplementStack` ADD FOREIGN KEY (`user`) REFERENCES `fitfam`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200511114351-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,108 @@
+datasource db {
+  provider = "mysql"
+  url      = env("MYSQL_URL")
+}
+
+generator client {
+  provider      = "prisma-client-js"
+  binaryTargets = ["rhel-openssl-1.0.x", "native"]
+}
+
+model User {
+  id               String            @default(cuid()) @id
+  email            String            @unique
+  name             String
+  username         String            @unique
+  picture          String
+  bio              String?
+  workouts         Workout[]
+  bodyweights      Bodyweight[]
+  profile_songs    ProfileSong[]
+  supplement_stack SupplementStack[]
+  instagram        String?
+  dateOfBirth      DateTime?
+  height           String?
+  createdAt        DateTime          @default(now())
+  updatedAt        DateTime          @updatedAt
+  WorkoutLog       WorkoutLog[]
+  Supplement       Supplement[]
+}
+
+model Workout {
+  id        String       @default(cuid()) @id
+  title     String
+  slug      String
+  user      User         @relation(fields: [userId], references: [id])
+  userId    String       @map("user")
+  logs      WorkoutLog[]
+  createdAt DateTime     @default(now())
+  updatedAt DateTime     @updatedAt
+}
+
+model WorkoutLog {
+  id         String   @default(cuid()) @id
+  user       User     @relation(fields: [userId], references: [id])
+  userId     String   @map("user")
+  exercise   Exercise @relation(fields: [exerciseId], references: [id])
+  exerciseId String   @map("exercise")
+  workout    Workout  @relation(fields: [workoutId], references: [id])
+  workoutId  String   @map("workout")
+  reps       Int
+  weight     Float
+  createdAt  DateTime @default(now())
+  updatedAt  DateTime @updatedAt
+}
+
+model Exercise {
+  id         String       @default(cuid()) @id
+  name       String       @unique
+  slug       String       @unique
+  createdAt  DateTime     @default(now())
+  updatedAt  DateTime     @updatedAt
+  WorkoutLog WorkoutLog[]
+}
+
+model Bodyweight {
+  id        String   @default(cuid()) @id
+  weight    Float
+  user      User     @relation(fields: [userId], references: [id])
+  userId    String   @map("user")
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+}
+
+model ProfileSong {
+  id        String   @default(cuid()) @id
+  user      User     @relation(fields: [userId], references: [id])
+  userId    String   @map("user")
+  thumbnail String
+  url       String
+  title     String
+  artist    String
+  provider  String
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+}
+
+model Supplement {
+  id                String           @default(cuid()) @id
+  name              String
+  url               String
+  image_url         String
+  brand             String
+  added_by          User             @relation(fields: [addedById], references: [id])
+  addedById         String           @map("added_by")
+  createdAt         DateTime         @default(now())
+  updatedAt         DateTime         @updatedAt
+  SupplementStack   SupplementStack? @relation(fields: [supplementStackId], references: [id])
+  supplementStackId String?
+}
+
+model SupplementStack {
+  id          String       @default(cuid()) @id
+  user        User         @relation(fields: [userId], references: [id])
+  userId      String       @map("user")
+  supplements Supplement[]
+  createdAt   DateTime     @default(now())
+  updatedAt   DateTime     @updatedAt
+}
```


